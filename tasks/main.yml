---
- include: madhat.yml

- setup:

- set_fact:
    dist_name: "{{ ansible_distribution|lower }}"
    dist_version: "{{ ansible_distribution_major_version }}"

- debug:
    msg: >-
      Detected: {{ dist_name }} {{ dist_version }}

- include: "{{ dist_name }}/{{ dist_name }}_{{ dist_version }}.yml"

- pip:
    name: ansible
    state: latest